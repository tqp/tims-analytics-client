<div class="animated fadeIn">

  <div class="row">

    <div class="col-lg-12">

      <div class="card">
        <div class="card-header">
          <i class="fa fa-align-justify"></i>{{userGuid}} Bracket
        </div>
        <div class="card-body">
          <div class="table-container" style="overflow: auto;">
            <table mat-table [dataSource]="picksDataSource" class="table table-sm table-bordered">

              <ng-container matColumnDef="contestantKey">
                <th mat-header-cell *matHeaderCellDef>{{userGuid}}</th>
                <td mat-cell *matCellDef="let row">{{row.contestantKey}}</td>
                <td mat-footer-cell *matFooterCellDef>Points</td>
              </ng-container>

              <ng-container *ngFor="let round of counter(picksRoundCount); let i = index;"
                            matColumnDef="{{'round' + (i + 1)}}">
                <th mat-header-cell *matHeaderCellDef class="pick-header">
                  <div style="min-width: 30px; display: block; text-align: center;">{{i + 1}}</div>
                </th>
                <td mat-cell *matCellDef="let row" class="pick-cell" [ngClass]="getCustomClass(row.values[i].status)">
                  <i [ngClass]="getCustomIcon(row.values[i].status)"></i>
                  {{getCustomText(row.values[i].status, row.values[i].points)}}
                </td>
                <td mat-footer-cell *matFooterCellDef class="pick-footer">
                  {{calculateTotal(picksDataSource, i)}}
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="picksDisplayedColumns; sticky: true"></tr>
              <tr mat-row *matRowDef="let row; columns: picksDisplayedColumns;"></tr>
              <tr mat-footer-row *matFooterRowDef="picksDisplayedColumns"></tr>
            </table>

            <mat-card class="spinner-container" *ngIf="picksLoading">
              <mat-progress-spinner color="primary" mode="indeterminate">
              </mat-progress-spinner>
            </mat-card>

          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">

    <div class="col-lg-4">
      <div class="card">
        <div class="card-header">
          <i class="fa fa-align-justify"></i>Root to Stay
        </div>
        <div class="card-body">
          <div class="table-container">
            <table mat-table [dataSource]="stayDataSource" class="table table-striped">

              <ng-container matColumnDef="contestantName">
                <th mat-header-cell *matHeaderCellDef>Contestant</th>
                <td mat-cell *matCellDef="let row">{{row.contestantKey}}</td>
              </ng-container>

              <ng-container matColumnDef="pointDifferential">
                <th mat-header-cell *matHeaderCellDef>Points</th>
                <td mat-cell *matCellDef="let row">{{row.pointDifferential | number: '1.0-0'}}</td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="stayDisplayedColumns; sticky: true"></tr>
              <tr mat-row *matRowDef="let row; columns: stayDisplayedColumns;"></tr>

            </table>

            <mat-card class="spinner-container" *ngIf="stayLoading">
              <mat-progress-spinner color="primary" mode="indeterminate">
              </mat-progress-spinner>
            </mat-card>

          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card">
        <div class="card-header">
          <i class="fa fa-align-justify"></i>Root to Leave
        </div>
        <div class="card-body">
          <div class="table-container">
            <table mat-table [dataSource]="leaveDataSource" class="table table-striped">

              <ng-container matColumnDef="contestantName">
                <th mat-header-cell *matHeaderCellDef>Contestant</th>
                <td mat-cell *matCellDef="let row">{{row.contestantKey}}</td>
              </ng-container>

              <ng-container matColumnDef="pointDifferential">
                <th mat-header-cell *matHeaderCellDef>Points</th>
                <td mat-cell *matCellDef="let row">{{row.pointDifferential | number: '1.0-0'}}</td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="leaveDisplayedColumns; sticky: true"></tr>
              <tr mat-row *matRowDef="let row; columns: leaveDisplayedColumns;"></tr>

            </table>

            <mat-card class="spinner-container" *ngIf="leaveLoading">
              <mat-progress-spinner color="primary" mode="indeterminate">
              </mat-progress-spinner>
            </mat-card>

          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card">
        <div class="card-header">
          <i class="fa fa-align-justify"></i>Inconsequential
        </div>
        <div class="card-body">
          <div class="table-container">
            <table mat-table [dataSource]="inconsequentialDataSource" class="table table-striped">

              <ng-container matColumnDef="contestantName">
                <th mat-header-cell *matHeaderCellDef>Contestant</th>
                <td mat-cell *matCellDef="let row">{{row.contestantKey}}</td>
              </ng-container>

              <ng-container matColumnDef="pointDifferential">
                <th mat-header-cell *matHeaderCellDef>Points</th>
                <td mat-cell *matCellDef="let row">{{row.pointDifferential | number: '1.0-0'}}</td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="inconsequentialDisplayedColumns; sticky: true"></tr>
              <tr mat-row *matRowDef="let row; columns: inconsequentialDisplayedColumns;"></tr>

            </table>

            <mat-card class="spinner-container" *ngIf="inconsequentialLoading">
              <mat-progress-spinner color="primary" mode="indeterminate">
              </mat-progress-spinner>
            </mat-card>

          </div>
        </div>
      </div>
    </div>

  </div>


</div>
